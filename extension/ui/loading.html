<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter:wght@400;500;600;700&amp;family=Noto+Sans:wght@400;500;700;900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<title>Networking Score Loader</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<style>
    @keyframes smooth-progress {
      from {
        width: 5%;
      }
      to {
        width: 95%;
      }
    }
    .progress-animated {
      animation: smooth-progress 4s ease-out forwards !important;
    }
    #progress-bar {
      background-color: #0b80ee !important;
      width: 5%;
    }
  </style>
<script>
    let loadingStartTime;
    let progressBar;
    let isLoadingComplete = false;
    let actualLoadingDone = false;
    
    function startProgressAnimation() {
      loadingStartTime = Date.now();
      progressBar = document.getElementById('progress-bar');
      if (progressBar) {
        console.log('Starting smooth progress animation...');
        
        // Force initial state then start animation
        progressBar.style.width = '5%';
        console.log('Progress bar initial state set to 5%');
        console.log('Progress bar element:', progressBar);
        console.log('Progress bar computed style before animation:', window.getComputedStyle(progressBar).width);
        
        // Small delay to ensure initial state is set
        setTimeout(() => {
          progressBar.classList.add('progress-animated');
          console.log('Progress bar animation class added - should animate to 95% over 4 seconds');
          console.log('Progress bar classes:', progressBar.className);
          console.log('Progress bar computed style after animation class:', window.getComputedStyle(progressBar).width);
          
          // Check animation is actually running
          setTimeout(() => {
            console.log('Progress bar width after 1 second:', window.getComputedStyle(progressBar).width);
          }, 1000);
          
          setTimeout(() => {
            console.log('Progress bar width after 2 seconds:', window.getComputedStyle(progressBar).width);
          }, 2000);
        }, 100);
        
      } else {
        console.error('Progress bar element not found!');
      }
      
      // Check every 200ms if we should complete
      const checkCompletion = setInterval(() => {
        const elapsedTime = Date.now() - loadingStartTime;
        
        // Minimum 2 seconds AND actual loading must be done
        if (elapsedTime >= 2000 && actualLoadingDone) {
          clearInterval(checkCompletion);
          
          // Final push to 100%
          if (progressBar) {
            progressBar.classList.remove('progress-animated');
            progressBar.style.width = '100%';
            console.log('Analysis complete! Progress: 100%');
          }
          
          isLoadingComplete = true;
          console.log('Loading complete (minimum 2s + API done) - notifying parent...');
          
          // Small delay for visual satisfaction
          setTimeout(() => {
            if (window.onLoadingScreenComplete) {
              window.onLoadingScreenComplete();
            }
          }, 300);
        }
      }, 200);
    }
    
    // Make sure this function is globally accessible
    window.notifyAnalysisComplete = function() {
      console.log('Analysis complete notification received');
      actualLoadingDone = true;
    };
    
    document.addEventListener("DOMContentLoaded", function() {
      console.log('Loading screen DOM loaded');
      startProgressAnimation();
    });
  </script>
</head>
<body class="bg-slate-50" style='font-family: Inter, "Noto Sans", sans-serif;'>
<div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden items-center justify-center">
<div class="layout-container flex flex-col items-center justify-center bg-white shadow-lg rounded-xl" style="width: 400px; height: 564px;">
<div class="layout-content-container flex flex-col w-full h-full items-center justify-center text-center p-10" role="status" aria-live="polite" aria-label="Loading networking score analysis">
<div class="mb-8" aria-hidden="true">
<img alt="Cute loading animation" class="w-32 h-32 object-contain rounded-lg" src="https://i.imgur.com/zU3v0QV.gif"/>
</div>
<h2 class="text-slate-800 text-xl font-semibold leading-tight mb-4">Calculating networking score...</h2>
<p class="text-slate-600 text-sm font-normal leading-relaxed mb-8">Analyzing profile, this may take a few moments.</p>
<div class="w-full h-3 rounded-full overflow-hidden" role="progressbar" aria-label="Analysis progress" aria-valuemin="0" aria-valuemax="100">
<div id="progress-bar" class="h-full rounded-full" style="width: 5%; background-color: #0b80ee;"></div>
</div>
</div>
</div>
</div>

</body></html>