<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter:wght@400;500;600;700&amp;family=Noto+Sans:wght@400;500;700;900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<title>Networking Score Loader</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<style>
    #progress-bar {
      background-color: #0b80ee;
      transition: width 0.1s ease;
    }
  </style>
<script>
    let loadingStartTime;
    let progressBar;
    let isLoadingComplete = false;
    let actualLoadingDone = false;
    let animationInterval;
    
    function startProgressAnimation() {
      loadingStartTime = Date.now();
      progressBar = document.getElementById('progress-bar');
      if (progressBar) {
        console.log('Starting progress animation...');
        console.log('Progress bar element found:', progressBar);
        
        // Start with 5% width to make it immediately visible
        progressBar.style.width = '5%';
        
        // Animate to 100% over 2 seconds using JavaScript
        let startTime = Date.now();
        animationInterval = setInterval(() => {
          const elapsed = Date.now() - startTime;
          const progress = Math.min((elapsed / 2000) * 100, 100); // 2 seconds = 100%
          progressBar.style.width = progress + '%';
          
          if (progress >= 100) {
            clearInterval(animationInterval);
          }
        }, 50); // Update every 50ms for smooth animation
        
        console.log('Progress animation started with JavaScript');
      } else {
        console.error('Progress bar element not found!');
        console.log('All elements with progress-bar id:', document.querySelectorAll('#progress-bar'));
      }
      
      // Check every 100ms if we should complete
      const checkCompletion = setInterval(() => {
        const elapsedTime = Date.now() - loadingStartTime;
        
        // Minimum 2 seconds AND actual loading must be done
        if (elapsedTime >= 2000 && actualLoadingDone) {
          clearInterval(checkCompletion);
          if (animationInterval) clearInterval(animationInterval);
          isLoadingComplete = true;
          console.log('Loading complete - notifying parent...');
          // Notify parent that loading is ready to complete
          if (window.parent && window.parent.onLoadingScreenComplete) {
            window.parent.onLoadingScreenComplete();
          } else if (window.onLoadingScreenComplete) {
            window.onLoadingScreenComplete();
          }
        }
      }, 100);
    }
    
    // Function to be called when actual analysis is complete
    window.notifyAnalysisComplete = function() {
      console.log('Analysis complete notification received');
      actualLoadingDone = true;
    };
    
    document.addEventListener("DOMContentLoaded", function() {
      console.log('Loading screen DOM loaded');
      startProgressAnimation();
    });
  </script>
</head>
<body class="bg-slate-50" style='font-family: Inter, "Noto Sans", sans-serif;'>
<div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden items-center justify-center">
<div class="layout-container flex flex-col items-center justify-center bg-white shadow-lg rounded-xl" style="width: 400px; height: 564px;">
<div class="layout-content-container flex flex-col w-full h-full items-center justify-center text-center p-10" role="status" aria-live="polite" aria-label="Loading networking score analysis">
<div class="mb-8" aria-hidden="true">
<img alt="Cute loading animation" class="w-32 h-32 object-contain rounded-lg" src="https://i.imgur.com/zU3v0QV.gif"/>
</div>
<h2 class="text-slate-800 text-xl font-semibold leading-tight mb-4">Calculating networking score...</h2>
<p class="text-slate-600 text-sm font-normal leading-relaxed mb-8">Analyzing profile, this may take a few moments.</p>
<div class="w-full h-6 bg-gray-300 rounded-full overflow-hidden border-2 border-gray-400" role="progressbar" aria-label="Analysis progress" aria-valuemin="0" aria-valuemax="100">
<div id="progress-bar" class="h-full rounded-full" style="width: 0%; background-color: #0b80ee; border: 1px solid #0066cc;"></div>
</div>
</div>
</div>
</div>

</body></html>